# For Windows 

## üìò CORBA Calculator - Distributed Application using CORBA (Command Line Version)

This project demonstrates a simple distributed application using **CORBA (Common Object Request Broker Architecture)** in Java. It performs basic calculator operations remotely using CORBA's client-server communication model.

---

## üìÅ Project Structure

```
CorbaCalculator/
‚îú‚îÄ‚îÄ calculator.idl
‚îú‚îÄ‚îÄ CalculatorApp/               ‚Üê Generated by `idlj`
‚îÇ   ‚îú‚îÄ‚îÄ Calculator.java
‚îÇ   ‚îú‚îÄ‚îÄ CalculatorHelper.java
‚îÇ   ‚îú‚îÄ‚îÄ CalculatorHolder.java
‚îÇ   ‚îú‚îÄ‚îÄ CalculatorOperations.java
‚îÇ   ‚îú‚îÄ‚îÄ CalculatorPOA.java
‚îÇ   ‚îî‚îÄ‚îÄ _CalculatorStub.java
‚îú‚îÄ‚îÄ CalculatorImpl.java
‚îú‚îÄ‚îÄ CalculatorServer.java
‚îî‚îÄ‚îÄ CalculatorClient.java
```

---

## üõ† Requirements

* Java JDK (8 or higher, JDK 8 preferred)
* `idlj` tool (comes with JDK)
* Command Prompt (Windows)

---

## üöÄ Steps to Run the Program via CMD

### ‚úÖ 1. Setup Environment Variables (if not done)

Make sure your Java `bin` path is added to your `PATH` environment variable.

Example path:

```
C:\Program Files\Java\jdk1.8.0_202\bin
```

To check:

```bash
java -version
idlj -version
```

---

### üìå 2. Create Working Directory

```bash
mkdir CorbaCalculator
cd CorbaCalculator
```

Place your `calculator.idl` file and source files in this folder.

---

### üßæ 3. Write the IDL File

Create a file named `calculator.idl`:

```idl
module CalculatorApp {
  interface Calculator {
    float add(in float a, in float b);
    float sub(in float a, in float b);
    float mul(in float a, in float b);
    float div(in float a, in float b);
  };
};
```

---

### ‚öôÔ∏è 4. Generate Java bindings from IDL

Run this command in CMD:

```bash
idlj -fall calculator.idl
```

This will generate a folder named `CalculatorApp/` with necessary stub and skeleton files.

---

### üßë‚Äçüíª 5. Create Implementation and Server Files

Create the following Java files in the same folder:

#### `CalculatorImpl.java`

```java
import CalculatorApp.*;
import org.omg.CORBA.*;

public class CalculatorImpl extends CalculatorPOA {
    private ORB orb;

    public void setORB(ORB orb_val) {
        orb = orb_val;
    }

    public float add(float a, float b) {
        return a + b;
    }

    public float sub(float a, float b) {
        return a - b;
    }

    public float mul(float a, float b) {
        return a * b;
    }

    public float div(float a, float b) {
        return a / b;
    }
}
```

#### `CalculatorServer.java`

```java
import CalculatorApp.*;
import org.omg.CORBA.*;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;
import org.omg.PortableServer.*;
import org.omg.PortableServer.POA;

import java.util.Properties;

public class CalculatorServer {
    public static void main(String args[]) {
        try {
            ORB orb = ORB.init(args, null);

            POA rootpoa = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
            rootpoa.the_POAManager().activate();

            CalculatorImpl calcImpl = new CalculatorImpl();
            calcImpl.setORB(orb);

            org.omg.CORBA.Object ref = rootpoa.servant_to_reference(calcImpl);
            Calculator href = CalculatorHelper.narrow(ref);

            org.omg.CORBA.Object objRef =
                orb.resolve_initial_references("NameService");
            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

            NameComponent path[] = ncRef.to_name("Calculator");
            ncRef.rebind(path, href);

            System.out.println("Calculator Server is ready and waiting...");
            orb.run();
        } catch (Exception e) {
            System.err.println("ERROR: " + e);
            e.printStackTrace(System.out);
        }
        System.out.println("Calculator Server Exiting...");
    }
}
```

#### `CalculatorClient.java`

```java
import CalculatorApp.*;
import org.omg.CORBA.*;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;

public class CalculatorClient {
    public static void main(String args[]) {
        try {
            ORB orb = ORB.init(args, null);

            org.omg.CORBA.Object objRef =
                orb.resolve_initial_references("NameService");
            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

            Calculator calcImpl = CalculatorHelper.narrow(ncRef.resolve_str("Calculator"));

            System.out.println("Sum: " + calcImpl.add(10, 5));
            System.out.println("Sub: " + calcImpl.sub(10, 5));
            System.out.println("Mul: " + calcImpl.mul(10, 5));
            System.out.println("Div: " + calcImpl.div(10, 5));
        } catch (Exception e) {
            System.out.println("ERROR: " + e);
            e.printStackTrace(System.out);
        }
    }
}
```

---

### üß± 6. Compile the Java Files

```bash
javac CalculatorApp/*.java CalculatorImpl.java CalculatorServer.java CalculatorClient.java
```

---

### üß† 7. Start the CORBA Name Server

```bash
tnameserv -ORBInitialPort 1050
```

Let this run in its own CMD window.

---

### üñ•Ô∏è 8. Run the Server

In a new CMD window:

```bash
java CalculatorServer -ORBInitialPort 1050 -ORBInitialHost localhost
```

---

### üíª 9. Run the Client

In another CMD window:

```bash
java CalculatorClient -ORBInitialPort 1050 -ORBInitialHost localhost
```

---

## ‚úÖ Output

You should see:

```
Sum: 15.0
Sub: 5.0
Mul: 50.0
Div: 2.0
```

---

## üìå Notes

* Make sure all CMD windows are opened from the correct directory.
* Always start `tnameserv` first before running the server.
* Use the same port (`1050`) for all communication.

---
# For Ubuntu 
---
## üìò CORBA Calculator - Distributed Application using CORBA (Ubuntu/Linux Version)

This project is a demonstration of a **distributed calculator application using CORBA (Common Object Request Broker Architecture)** in Java. It showcases how a CORBA server and client communicate over a network using IDL-generated stubs.

---

## üìÅ Project Structure

```
CorbaCalculator/
‚îú‚îÄ‚îÄ calculator.idl
‚îú‚îÄ‚îÄ CalculatorApp/               ‚Üê Generated by `idlj`
‚îÇ   ‚îú‚îÄ‚îÄ Calculator.java
‚îÇ   ‚îú‚îÄ‚îÄ CalculatorHelper.java
‚îÇ   ‚îú‚îÄ‚îÄ CalculatorHolder.java
‚îÇ   ‚îú‚îÄ‚îÄ CalculatorOperations.java
‚îÇ   ‚îú‚îÄ‚îÄ CalculatorPOA.java
‚îÇ   ‚îî‚îÄ‚îÄ _CalculatorStub.java
‚îú‚îÄ‚îÄ CalculatorImpl.java
‚îú‚îÄ‚îÄ CalculatorServer.java
‚îî‚îÄ‚îÄ CalculatorClient.java
```

---

## üõ† Requirements

* Java JDK 8 (Recommended for CORBA)
* `idlj` tool (comes with JDK)
* Terminal

---

## üîß Installation

### 1. Install Java JDK 8 (if not installed):

```bash
sudo apt update
sudo apt install openjdk-8-jdk
```

Check if installed:

```bash
java -version
javac -version
idlj -version
```

> If `idlj` is missing, make sure `/usr/lib/jvm/java-8-openjdk-amd64/bin` is in your `PATH`.

---

## üöÄ Steps to Run the Program

### ‚úÖ 1. Create Working Directory

```bash
mkdir CorbaCalculator
cd CorbaCalculator
```

---

### üßæ 2. Write the IDL File

Create a file named `calculator.idl`:

```idl
module CalculatorApp {
  interface Calculator {
    float add(in float a, in float b);
    float sub(in float a, in float b);
    float mul(in float a, in float b);
    float div(in float a, in float b);
  };
};
```

---

### ‚öôÔ∏è 3. Generate Java Bindings from IDL

```bash
idlj -fall calculator.idl
```

This generates the `CalculatorApp/` folder with stubs and skeletons.

---

### üßë‚Äçüíª 4. Create Java Source Files

In the same directory, create:

#### `CalculatorImpl.java`

```java
import CalculatorApp.*;
import org.omg.CORBA.*;

public class CalculatorImpl extends CalculatorPOA {
    private ORB orb;

    public void setORB(ORB orb_val) {
        orb = orb_val;
    }

    public float add(float a, float b) { return a + b; }
    public float sub(float a, float b) { return a - b; }
    public float mul(float a, float b) { return a * b; }
    public float div(float a, float b) { return a / b; }
}
```

#### `CalculatorServer.java`

```java
import CalculatorApp.*;
import org.omg.CORBA.*;
import org.omg.CosNaming.*;
import org.omg.PortableServer.*;
import java.util.Properties;

public class CalculatorServer {
    public static void main(String[] args) {
        try {
            ORB orb = ORB.init(args, null);
            POA rootpoa = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
            rootpoa.the_POAManager().activate();

            CalculatorImpl calcImpl = new CalculatorImpl();
            calcImpl.setORB(orb);

            org.omg.CORBA.Object ref = rootpoa.servant_to_reference(calcImpl);
            Calculator href = CalculatorHelper.narrow(ref);

            org.omg.CORBA.Object objRef = orb.resolve_initial_references("NameService");
            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

            NameComponent path[] = ncRef.to_name("Calculator");
            ncRef.rebind(path, href);

            System.out.println("Calculator Server ready...");
            orb.run();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

#### `CalculatorClient.java`

```java
import CalculatorApp.*;
import org.omg.CORBA.*;
import org.omg.CosNaming.*;

public class CalculatorClient {
    public static void main(String[] args) {
        try {
            ORB orb = ORB.init(args, null);
            org.omg.CORBA.Object objRef = orb.resolve_initial_references("NameService");
            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

            Calculator calc = CalculatorHelper.narrow(ncRef.resolve_str("Calculator"));

            System.out.println("Add: " + calc.add(12, 5));
            System.out.println("Sub: " + calc.sub(12, 5));
            System.out.println("Mul: " + calc.mul(12, 5));
            System.out.println("Div: " + calc.div(12, 5));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

---

### üß± 5. Compile the Java Files

```bash
javac CalculatorApp/*.java CalculatorImpl.java CalculatorServer.java CalculatorClient.java
```

---

### üîÅ 6. Start the CORBA Name Server

```bash
tnameserv -ORBInitialPort 1050
```

> Let this run in the background or a new terminal.

---

### üñ•Ô∏è 7. Run the Server

In a **new terminal**:

```bash
java CalculatorServer -ORBInitialPort 1050 -ORBInitialHost localhost
```

---

### üíª 8. Run the Client

In another terminal:

```bash
java CalculatorClient -ORBInitialPort 1050 -ORBInitialHost localhost
```

---

## ‚úÖ Expected Output

```
Add: 17.0
Sub: 7.0
Mul: 60.0
Div: 2.4
```

---

## üìù Notes

* Always start the name server **before** the server or client.
* Use the **same port (1050)** in all commands.
* Make sure you're in the `CorbaCalculator` directory in all terminals.

---


